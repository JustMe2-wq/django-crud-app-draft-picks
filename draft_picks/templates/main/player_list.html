{% extends 'base.html' %} {% load static %} {% block head %}
<link rel="stylesheet" href="{% static 'css/players/player-index.css' %}" />
{% endblock %} 
{% block content %}

<div class="players-container">
    <div class="page-header">
        <h1 class="page-title">All players in the Draft</h1>
    </div>

    {% if player_list %}
        <div class="players-grid">
            {% for player in player_list %}
            <div class="player-card">

                <div class="player-card-header">
                    <h3 class="player-name">{{ player.name }}</h3>
                    <span class="player-position">{{ player.position }}</span>
                </div>
                
                <div class="player-card-body">
                    <div class="player-info">

                        <div class="player-age">
                            <strong>Age:</strong> {{ player.age }}
                        </div>

                        <div class="player-draft">
                            <strong>Drafted:</strong>
                            {% if player.draft_set.all %}
                                {% for draft in player.draft_set.all %}
                                    By {{ draft.team.name }} in {{ draft.get_pick_display }}{% if not forloop.last %}, {% endif %}
                                {% endfor %}
                            {% else %}
                                By no team
                            {% endif %}
                        </div>

                    </div>
                </div>

                <div class="player-card-actions">
                    <a href="{% url 'player_detail' player.id %}" class="btn btn-primary">View Details</a>
                    <a href="{% url 'player_update' player.id %}" class="btn btn-secondary">Edit</a>
                    <a href="{% url 'player_delete' player.id %}" class="btn btn-danger">Delete</a>
                </div>

            </div>
            {% endfor %}
        </div>

    {% else %}
        <div class="no-players">
            <h3>No Players Yet</h3>
        </div>
    {% endif %}
    
    <div class="player-actions">
        <a href="{% url 'player_create' %}" class="btn btn-success btn-large">
            <span class="btn-icon">+</span>
            Add New Player
        </a>
    </div>

</div>

{% endblock %}

